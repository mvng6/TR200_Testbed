# TR200 μ„Όμ„ κΈ°λ° μ•μ „ μ μ–΄ μ‹μ¤ν…

## π“‹ ν”„λ΅μ νΈ κ°μ”

TR200 λ΅λ΄‡μ **λ“€μ–Ό Lidar μ„Όμ„**λ¥Ό ν™μ©ν• μ‹¤μ‹κ°„ μ¥μ• λ¬Ό κ°μ§€ λ° μ•μ „ μ μ–΄ μ‹μ¤ν…μ…λ‹λ‹¤. Docker κΈ°λ° ROS Noetic ν™κ²½μ—μ„ Woosh SDKλ¥Ό ν†µν•΄ TR200 λ΅λ΄‡μ„ μ μ–΄ν•©λ‹λ‹¤.

## π― ν•µμ‹¬ κΈ°λ¥

- **μ‹¤μ‹κ°„ μ¥μ• λ¬Ό κ°μ§€**: TR200μ **λ“€μ–Ό Lidar μ„Όμ„**λ¥Ό ν™μ©ν• 360λ„ μ „ν›„λ°© μ¥μ• λ¬Ό κ°μ§€
- **μ§€λ¥ν• μ†λ„ μ μ–΄**: κ±°λ¦¬μ— λ”°λ¥Έ μλ™ μ†λ„ μ΅°μ  (μ •μƒ β†’ κ°μ† β†’ μ •μ§€)
- **μ•μ „ μ°μ„  μ μ–΄**: μ„ν— μƒν™©μ—μ„ μ¦‰μ‹ λΉ„μƒ μ •μ§€
- **λ¶€λ“λ¬μ΄ μ μ–΄**: κΈ‰κ²©ν• κ°€μ†/κ°μ† λ°©μ§€
- **λ“€μ–Ό μ„Όμ„ μµν•©**: μ „λ°©/ν›„λ°© μ„Όμ„ λ°μ΄ν„°λ¥Ό ν†µν•©ν• μ •ν™•ν• μ¥μ• λ¬Ό κ°μ§€
- **Docker κΈ°λ° ν™κ²½**: Ubuntu 20.04 + ROS Noetic ν™κ²½μ—μ„ μ•μ •μ  μ‹¤ν–‰

## π“ ν”„λ΅μ νΈ κµ¬μ΅°

```
tr200_ros_docker_project/
β”β”€β”€ README.md                         # ν”„λ΅μ νΈ λ¬Έμ„
β”β”€β”€ scripts/                          # μ‹¤ν–‰ μ¤ν¬λ¦½νΈ
β”‚   β”β”€β”€ build_docker.sh               # Docker μ΄λ―Έμ§€ λΉλ“
β”‚   β”β”€β”€ run_container.sh              # Docker μ»¨ν…μ΄λ„ μ‹¤ν–‰
β”‚   β”β”€β”€ run_sensor_controller.sh      # μ„Όμ„ κΈ°λ° μ μ–΄ μ‹¤ν–‰
β”‚   β”β”€β”€ setup_ros.sh                  # ROS ν™κ²½ μ„¤μ •
β”‚   β””β”€β”€ archive/                      # μ΄μ „ λ²„μ „ μ¤ν¬λ¦½νΈλ“¤
β”β”€β”€ src/tr200_simple_control/scripts/ # Python μ μ–΄ μ¤ν¬λ¦½νΈ
β”‚   β”β”€β”€ sensor_based_safety_controller.py    # κΈ°λ³Έ μ„Όμ„ κΈ°λ° μ μ–΄
β”‚   β”β”€β”€ advanced_sensor_controller.py       # κ³ κΈ‰ μ„Όμ„ κΈ°λ° μ μ–΄
β”‚   β”β”€β”€ simple_linear_motion.py             # κΈ°λ³Έ μ™•λ³µ μ΄λ™
β”‚   β””β”€β”€ archive/                             # κ°λ° κ³Όμ • νμΌλ“¤
β”β”€β”€ src/woosh_robot_py/              # Woosh SDK
β”‚   β”β”€β”€ README.md                    # SDK λ¬Έμ„
β”‚   β”β”€β”€ examples/                    # μμ  μ½”λ“
β”‚   β””β”€β”€ woosh/                       # SDK ν•µμ‹¬ λ¨λ“
β”β”€β”€ config/                           # μ„¤μ • νμΌ
β”‚   β”β”€β”€ area_motion_params.yaml       # μμ—­ μ ν• κµ¬λ™ νλΌλ―Έν„°
β”‚   β”β”€β”€ robot_params.yaml            # λ΅λ΄‡ κΈ°λ³Έ νλΌλ―Έν„°
β”‚   β””β”€β”€ test_safe_params.yaml        # ν…μ¤νΈμ© μ•μ „ νλΌλ―Έν„°
β”β”€β”€ docker/                           # Docker ν™κ²½
β”‚   β”β”€β”€ Dockerfile                    # Docker μ΄λ―Έμ§€ μ •μ
β”‚   β”β”€β”€ docker-compose.yml           # μ»¨ν…μ΄λ„ μ¤μΌ€μ¤νΈλ μ΄μ…
β”‚   β””β”€β”€ entrypoint.sh                # μ»¨ν…μ΄λ„ μ‹μ‘ μ¤ν¬λ¦½νΈ
β”β”€β”€ launch/                           # ROS λ°μΉ νμΌ
β””β”€β”€ archive/                          # μ΄μ „ λ²„μ „ νμΌλ“¤
```

## π€ μ‚¬μ© λ°©λ²•

### 1. Docker μ»¨ν…μ΄λ„ μ‹¤ν–‰ (μ²« λ²μ§Έ ν„°λ―Έλ„)
```bash
cd /home/ldj/tr200_ws/tr200_ros_docker_project
./scripts/run_container.sh
```

### 2. μ»¨ν…μ΄λ„ μ§„μ… λ°©λ²•

#### λ°©λ²• 1: run_docker_tr200 λ…λ Ήμ–΄ μ‚¬μ© (κ¶μ¥)
```bash
# λ‘ λ²μ§Έ ν„°λ―Έλ„μ—μ„
run_docker_tr200
```

#### λ°©λ²• 2: docker exec λ…λ Ήμ–΄ μ‚¬μ©
```bash
# λ‘ λ²μ§Έ ν„°λ―Έλ„μ—μ„
docker exec -it tr200_control_container /bin/bash
```

### 3. μ„Όμ„ κΈ°λ° μ•μ „ μ μ–΄ μ‹¤ν–‰
```bash
# μ»¨ν…μ΄λ„ λ‚΄λ¶€μ—μ„ (μλ™μΌλ΅ ROS ν™κ²½μ΄ μ„¤μ •λ¨)
./scripts/run_sensor_controller.sh

# λλ” μ§μ ‘ μ‹¤ν–‰
python3 src/tr200_simple_control/scripts/sensor_based_safety_controller.py

# λλ” κ³ κΈ‰ μ„Όμ„ κΈ°λ° μ μ–΄
python3 src/tr200_simple_control/scripts/advanced_sensor_controller.py

# λλ” κΈ°λ³Έ μ™•λ³µ μ΄λ™ (μ°Έκ³ μ©)
python3 src/tr200_simple_control/scripts/simple_linear_motion.py
```

### 4. ROS ν™κ²½ μ¬μ„¤μ • (ν•„μ”ν• κ²½μ°)
```bash
# μ»¨ν…μ΄λ„ λ‚΄λ¶€μ—μ„
./scripts/setup_ros.sh
```

## β™οΈ μ„¤μ • νλΌλ―Έν„°

### μ„Όμ„ κΈ°λ° μ•μ „ μ μ–΄ μ„¤μ •
- **μµμ† μ¥μ• λ¬Ό κ±°λ¦¬**: 0.5m (μ΄ κ±°λ¦¬ μ΄ν•μ—μ„ μ¦‰μ‹ μ •μ§€)
- **κ²½κ³  κ±°λ¦¬**: 0.8m (μ΄ κ±°λ¦¬μ—μ„ κ°μ† μ‹μ‘)
- **μ•μ „ κ±°λ¦¬**: 1.0m (μ΄ κ±°λ¦¬ μ΄μƒμ—μ„ μ •μƒ μ†λ„)

### μ μ–΄ μ„¤μ •
- **μ •μƒ μ†λ„**: 0.2 m/s
- **κ°μ† μ†λ„**: 0.1 m/s
- **μ •μ§€ μ†λ„**: 0.0 m/s
- **μ μ–΄ μ£Όνμ**: 20Hz

### μ„¤μ • νμΌλ“¤
- **`config/area_motion_params.yaml`**: μμ—­ μ ν• κµ¬λ™ νλΌλ―Έν„° (κΈ°λ³Έ μ„¤μ •)
- **`config/robot_params.yaml`**: λ΅λ΄‡ κΈ°λ³Έ νλΌλ―Έν„°
- **`config/test_safe_params.yaml`**: ν…μ¤νΈμ© μ•μ „ νλΌλ―Έν„° (λ” λ³΄μμ  μ„¤μ •)

## π“ μμƒ λ™μ‘

```
π― μ„Όμ„ κΈ°λ° μ•μ „ μ μ–΄ μ‹μ¤ν…μ„ μ‹μ‘ν•©λ‹λ‹¤!
   μµμ† μ¥μ• λ¬Ό κ±°λ¦¬: 0.5m
   κ²½κ³  κ±°λ¦¬: 0.8m
   μ•μ „ κ±°λ¦¬: 1.0m
   μ •μƒ μ†λ„: 0.2 m/s
   κ°μ† μ†λ„: 0.1 m/s

π“΅ μ¤μΊλ„ λ°μ΄ν„° μμ‹ : 1081κ° ν¬μΈνΈ
π“΅ κ°λ„ λ²”μ„: -3.14Β° ~ 3.14Β°
π“΅ κ±°λ¦¬ λ²”μ„: 0.01m ~ 50.00m
============================================================
π” μ„Όμ„ λ¶„λ¦¬ μ™„λ£:
   μ „λ°© μ„Όμ„: 540κ° ν¬μΈνΈ (μΈλ±μ¤ 270~810)
   ν›„λ°© μ„Όμ„: 540κ° ν¬μΈνΈ (μΈλ±μ¤ 810~270)
π” λ“€μ–Ό μ„Όμ„ λ¶„μ„:
   μ „λ°© μ„Όμ„: μµμ†κ±°λ¦¬ 1.200m, μ¥μ• λ¬Ό 2κ°
   ν›„λ°© μ„Όμ„: μµμ†κ±°λ¦¬ 2.500m, μ¥μ• λ¬Ό 0κ°
   μ „μ²΄ μµμ†κ±°λ¦¬: 1.200m, μ΄ μ¥μ• λ¬Ό: 2κ°

08:15:23 | forward   |  0.200 |  1.200m | πΆ μ•μ „
08:15:24 | forward   |  0.200 |  1.100m | πΆ μ•μ „
08:15:25 | forward   |  0.200 |  0.900m | π΅ μ£Όμ
β οΈ μ£Όμ: μ¥μ• λ¬Ό κ·Όμ ‘ (κ±°λ¦¬: 0.900m)
08:15:26 | forward   |  0.100 |  0.800m | π΅ μ£Όμ
08:15:27 | forward   |  0.100 |  0.600m | π΅ μ£Όμ
08:15:28 | forward   |  0.000 |  0.500m | π”΄ μ„ν—
π¨ μ„ν—! μ¥μ• λ¬Ό κ°μ§€ (κ±°λ¦¬: 0.500m)
π¨ λΉ„μƒ μ •μ§€! μ΄μ : μ¥μ• λ¬Ό κ°μ§€ (κ±°λ¦¬: 0.500m)
β… λΉ„μƒ μ •μ§€ μ™„λ£
```

## π”§ νμΌ μ„¤λ…

### ν•µμ‹¬ νμΌλ“¤
- **`sensor_based_safety_controller.py`**: **λ“€μ–Ό Lidar μ„Όμ„** κΈ°λ° μ•μ „ μ μ–΄ μ‹μ¤ν… (μ „λ°©/ν›„λ°© μ„Όμ„ μµν•©)
- **`advanced_sensor_controller.py`**: κ³ κΈ‰ μ„Όμ„ κΈ°λ° μ μ–΄ (μ„Ήν„°λ³„ λ¶„μ„, μ§€λ¥ν• νν”Ό)
- **`simple_linear_motion.py`**: κΈ°λ³Έ μ™•λ³µ μ΄λ™ (μ°Έκ³ μ©, μ„Όμ„ μ—†μ΄ λ‹¨μ μ΄λ™)

### μ‹¤ν–‰ μ¤ν¬λ¦½νΈλ“¤
- **`run_container.sh`**: Docker μ»¨ν…μ΄λ„ μ‹¤ν–‰
- **`run_sensor_controller.sh`**: μ„Όμ„ κΈ°λ° μ μ–΄ μ‹¤ν–‰
- **`build_docker.sh`**: Docker μ΄λ―Έμ§€ λΉλ“
- **`setup_ros.sh`**: ROS ν™κ²½ μ„¤μ •

### μ„¤μ • νμΌλ“¤
- **`area_motion_params.yaml`**: μμ—­ μ ν• κµ¬λ™ νλΌλ―Έν„° (κΈ°λ³Έ μ„¤μ •)
- **`robot_params.yaml`**: λ΅λ΄‡ κΈ°λ³Έ νλΌλ―Έν„°
- **`test_safe_params.yaml`**: ν…μ¤νΈμ© μ•μ „ νλΌλ―Έν„°

### Archive νμΌλ“¤ (κ°λ° κ³Όμ •)
- **`bypass_taskable_test.py`**: kTaskable μƒνƒ μ°ν ν…μ¤νΈ
- **`integrated_safety_controller.py`**: μ„μΉ κΈ°λ° μμ—­ μ ν• μ μ–΄
- **`tr200_area_constrained_motion.py`**: μ›λ³Έ μμ—­ μ ν• κµ¬λ™ μ‹μ¤ν…
- **`real_time_monitor.py`**: μ‹¤μ‹κ°„ λ¨λ‹ν„°λ§ μ‹μ¤ν…
- **`simple_monitor.py`**: κ°„λ‹¨ν• λ¨λ‹ν„°λ§
- **`force_test_mode.py`**: κ°•μ  ν…μ¤νΈ λ¨λ“
- **`detailed_robot_diagnosis.py`**: λ΅λ΄‡ μ§„λ‹¨ λ„κµ¬
- **`velocity_bridge.py`**: ROS λΈλ¦¬μ§€ (λ―Έμ™„μ„±)

## π― κ°λ° λ©ν‘ λ‹¬μ„±

β… **νΉμ • μμ—­ λ‚΄μ—μ„λ§ μ•λ’¤ κµ¬λ™**: μ„μΉ κΈ°λ° μμ—­ μ ν• μ‹μ¤ν… κµ¬ν„  
β… **λ„¤λΉ„κ²μ΄μ… μ—†μ΄ μ§μ ‘ κµ¬λ™**: μ†λ„ μ μ–΄ κΈ°λ° μ‹μ¤ν… κµ¬ν„  
β… **μ„Όμ„ κΈ°λ° μ¥μ• λ¬Ό κ°μ§€**: TR200 Lidar μ„Όμ„ ν™μ©ν• μ‹¤μ‹κ°„ μ¥μ• λ¬Ό κ°μ§€  
β… **μ•μ „ν• κµ¬λ™**: κ±°λ¦¬ κΈ°λ° μλ™ μ†λ„ μ΅°μ  λ° λΉ„μƒ μ •μ§€  

## π“ μ§€μ›

λ¬Έμ κ°€ λ°μƒν•κ±°λ‚ μ¶”κ°€ κΈ°λ¥μ΄ ν•„μ”ν• κ²½μ°:
1. λ΅κ·Έ νμΌ ν™•μΈ (`docker/logs/` λ””λ ‰ν† λ¦¬)
2. μ„¤μ • νμΌ κ²€ν†  (`config/` λ””λ ‰ν† λ¦¬)
3. Archive ν΄λ”μ μ΄μ „ λ²„μ „ μ°Έμ΅° (`archive/` λ””λ ‰ν† λ¦¬)
4. Woosh SDK λ¬Έμ„ μ°Έμ΅° (`src/woosh_robot_py/README.md`)

### μ£Όμ” λ¬Έμ  ν•΄κ²°
- **λ΅λ΄‡ μ—°κ²° μ‹¤ν¨**: TR200 μ•±μ—μ„ λ΅λ΄‡ μƒνƒ ν™•μΈ (λΉ„μƒμ •μ§€ ν•΄μ , μ‘μ—… λ¨λ“ μ„¤μ •)
- **kTaskable μƒνƒ λ¬Έμ **: `archive/force_test_mode.py` μ°Έμ΅°
- **μ„Όμ„ λ°μ΄ν„° μ—†μ**: TR200μ Lidar μ„Όμ„ μƒνƒ ν™•μΈ
- **μ¥μ• λ¬Ό κ°μ§€ κ°μ„ **: λ“€μ–Ό μ„Όμ„ μµν•©, μ „λ°©/ν›„λ°© μ„Ήν„° λ¶„μ„, κ°•ν™”λ λΉ„μƒ μ •μ§€ μ‹μ¤ν…

---

**κ°λ°μ**: ldj  
**λ²„μ „**: v2.2.0 (λ“€μ–Ό λΌμ΄λ‹¤ μ„Όμ„ μµν•© μ‹μ¤ν…)  
**μµμΆ… μ—…λ°μ΄νΈ**: 2025λ…„ 09μ›” 23μΌ
