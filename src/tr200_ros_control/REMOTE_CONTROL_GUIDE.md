# 🎮 TR200 원격 제어 가이드

## 🚀 빠른 시작

### 방법 1: 분리된 실행 (권장)

#### 1단계: 기본 시스템 실행
```bash
# 터미널 1에서 기본 시스템 실행
roslaunch tr200_ros_control tr200_base_system.launch
```

#### 2단계: 키보드 제어 실행
```bash
# 터미널 2에서 키보드 제어 실행
roslaunch tr200_ros_control tr200_keyboard_control.launch
```

### 방법 2: 통합 실행 (간단한 테스트용)

```bash
# 모든 노드를 한 번에 실행
roslaunch tr200_ros_control tr200_remote_control.launch
```

### 키보드 제어 활성화
키보드 제어 노드가 실행되면 터미널에 다음과 같은 메시지가 나타납니다:
```
✅ Remote Control Node 실행 중...
💡 키보드 입력을 시작하려면 터미널을 클릭하세요.
```

**중요**: 키보드 제어가 실행된 터미널 창을 클릭하여 포커스를 맞춘 후 키보드 입력을 시작하세요!

## ⌨️ 키보드 제어

### 기본 이동 제어
- **`w`** - 전진 (앞으로 이동)
- **`s`** - 후진 (뒤로 이동)
- **`a`** - 좌회전 (왼쪽으로 회전하며 이동)
- **`d`** - 우회전 (오른쪽으로 회전하며 이동)

### 제자리 회전
- **`q`** - 제자리 좌회전 (현재 위치에서 왼쪽으로 회전)
- **`e`** - 제자리 우회전 (현재 위치에서 오른쪽으로 회전)

### 제어 명령
- **`스페이스`** - 정지 (즉시 정지)
- **`x`** - 비상정지 (긴급 정지)

### 시스템 명령
- **`h`** - 도움말 표시
- **`c`** - 연결 상태 확인
- **`r`** - 시스템 리셋

### 종료
- **`Ctrl+C`** - 시스템 종료

## 📊 상태 확인

### 연결 상태 확인
```bash
# 연결 상태 토픽 확인
rostopic echo /connection_status

# 로봇 상태 토픽 확인
rostopic echo /robot_status
```

### 제어 명령 확인
```bash
# 원격 제어 명령 확인
rostopic echo /remote_cmd_vel
```

### 노드 상태 확인
```bash
# 실행 중인 노드 확인
rosnode list

# 특정 노드 정보 확인
rosnode info /remote_control_node
rosnode info /robot_connection_node
```

## ⚙️ 설정 조정

### 속도 조정
```bash
# 낮은 속도로 실행 (안전한 테스트용)
roslaunch tr200_ros_control tr200_remote_control.launch \
  linear_speed:=0.2 \
  angular_speed:=0.2

# 높은 속도로 실행 (숙련자용)
roslaunch tr200_ros_control tr200_remote_control.launch \
  linear_speed:=0.8 \
  angular_speed:=0.8
```

### 명령 타임아웃 조정
```bash
# 명령 타임아웃을 5초로 설정
roslaunch tr200_ros_control tr200_remote_control.launch \
  command_timeout:=5.0
```

## 🚨 안전 주의사항

### 첫 실행 시
1. **낮은 속도로 테스트**: `linear_speed:=0.1, angular_speed:=0.1`
2. **충분한 공간 확보**: 로봇 주변에 장애물이 없는지 확인
3. **비상정지 준비**: 언제든지 `x` 키를 누를 수 있도록 준비

### 일반 사용 시
1. **로봇 연결 상태 확인**: `c` 키로 연결 상태 확인
2. **부드러운 조작**: 급격한 방향 전환 피하기
3. **정기적 정지**: `스페이스` 키로 주기적 정지

## 🐛 문제 해결

### 키보드 입력이 작동하지 않음
1. **터미널 포커스 확인**: 터미널 창을 클릭했는지 확인
2. **노드 실행 상태 확인**: `rosnode list`로 노드가 실행 중인지 확인
3. **권한 확인**: 터미널 권한 문제일 수 있음

### 로봇이 움직이지 않음
1. **연결 상태 확인**: `c` 키로 로봇 연결 상태 확인
2. **토픽 확인**: `rostopic echo /remote_cmd_vel`로 명령이 전송되는지 확인
3. **로봇 상태 확인**: 로봇의 비상정지 버튼이 해제되었는지 확인

### 연결이 끊어짐
1. **네트워크 확인**: 로봇과의 네트워크 연결 상태 확인
2. **로봇 전원 확인**: 로봇이 켜져 있는지 확인
3. **재연결**: 시스템을 재시작하거나 `r` 키로 리셋

## 💡 사용 팁

### 효율적인 조작
- **작은 움직임**: 키를 짧게 눌러서 작은 움직임 만들기
- **연속 조작**: 키를 길게 눌러서 연속 움직임 만들기
- **정확한 제어**: `q`, `e` 키로 정확한 각도 조정

### 모니터링
- **별도 터미널**: 다른 터미널에서 `rostopic echo` 명령으로 상태 모니터링
- **rqt 도구**: `rqt` 명령으로 GUI 도구 사용

---

**주의**: 이 시스템은 실시간 로봇 제어를 위한 것입니다. 안전을 최우선으로 하여 사용하세요!
