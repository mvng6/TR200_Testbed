# TR200 ROS Control Package

TR200 λ΅λ΄‡μ„ ROS Noetic ν™κ²½μ—μ„ SDKμ™€ μ—°λ™ν•μ—¬ μ μ–΄ν•λ” ν¨ν‚¤μ§€μ…λ‹λ‹¤.

## π“‹ κ°μ”

μ΄ ν¨ν‚¤μ§€λ” TR200 λ΅λ΄‡μ„ ROS ν™κ²½μ—μ„ μ μ–΄ν•κΈ° μ„ν• ν†µν•© μ†”λ£¨μ…μ„ μ κ³µν•©λ‹λ‹¤. SDKλ¥Ό ν†µν• λ΅λ΄‡ μ—°κ²°, μ„Όμ„ λ°μ΄ν„° μ²λ¦¬, μ•μ „ μ μ–΄, μ›κ²© μ μ–΄ λ“±μ κΈ°λ¥μ„ ν¬ν•¨ν•©λ‹λ‹¤.

## π—οΈ μ‹μ¤ν… κµ¬μ΅°

### λ…Έλ“ κµ¬μ„±
- **Robot Connection Node**: TR200 λ΅λ΄‡κ³Όμ SDK μ—°κ²° κ΄€λ¦¬
- **Remote Control Node**: ν‚¤λ³΄λ“ μ…λ ¥μ„ ν†µν• μ›κ²© μ μ–΄
- **Sensor Node**: λΌμ΄λ‹¤ μ„Όμ„ λ°μ΄ν„° μμ§‘ λ° μ²λ¦¬
- **Safety Controller Node**: μ„Όμ„ κΈ°λ° μ•μ „ μ μ–΄
- **Robot Driver Node**: λ΅λ΄‡ κµ¬λ™ μ μ–΄
- **Command Handler Node**: λ…λ Ή μ°μ„ μμ„ κ΄€λ¦¬
- **Status Monitor Node**: μ‹μ¤ν… μƒνƒ λ¨λ‹ν„°λ§

### ROS ν† ν”½
- `/cmd_vel`: λ΅λ΄‡ μ†λ„ λ…λ Ή
- `/remote_cmd_vel`: μ›κ²© μ μ–΄ λ…λ Ή
- `/scanner_data`: λΌμ΄λ‹¤ μ„Όμ„ λ°μ΄ν„°
- `/connection_status`: λ΅λ΄‡ μ—°κ²° μƒνƒ
- `/safety_status`: μ•μ „ μƒνƒ μ •λ³΄

## π€ λΉ λ¥Έ μ‹μ‘

### 1. ν™κ²½ μ„¤μ •

Docker μ»¨ν…μ΄λ„μ—μ„ μ‘μ—…:
```bash
# μ»¨ν…μ΄λ„ μ‹¤ν–‰
./scripts/run_container.sh

# ROS λ§μ¤ν„° μ‹¤ν–‰
roscore

# μ¶”κ°€ ν„°λ―Έλ„ μ ‘μ†
./scripts/connect_container.sh
```

### 2. ν¨ν‚¤μ§€ λΉλ“

```bash
cd /catkin_ws
catkin_make
source devel/setup.bash
```

### 3. μ›κ²© μ μ–΄ μ‹¤ν–‰

```bash
# μ›κ²© μ μ–΄ μ‹μ¤ν… μ‹¤ν–‰
roslaunch tr200_ros_control tr200_remote_control.launch
```

### 4. ν‚¤λ³΄λ“ μ μ–΄

ν„°λ―Έλ„μ„ ν΄λ¦­ν• ν›„ λ‹¤μ ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ λ΅λ΄‡μ„ μ μ–΄ν•  μ μμµλ‹λ‹¤:

- `w`: μ „μ§„
- `s`: ν›„μ§„
- `a`: μΆνμ „
- `d`: μ°νμ „
- `q`: μ μλ¦¬ μΆνμ „
- `e`: μ μλ¦¬ μ°νμ „
- `μ¤νμ΄μ¤`: μ •μ§€
- `x`: λΉ„μƒμ •μ§€
- `h`: λ„μ›€λ§ ν‘μ‹
- `c`: μ—°κ²° μƒνƒ ν™•μΈ

## π“ ν¨ν‚¤μ§€ κµ¬μ΅°

```
tr200_ros_control/
β”β”€β”€ CMakeLists.txt
β”β”€β”€ package.xml
β”β”€β”€ README.md
β”β”€β”€ launch/
β”‚   β””β”€β”€ tr200_remote_control.launch
β”β”€β”€ config/
β”‚   β”β”€β”€ robot_params.yaml
β”‚   β”β”€β”€ safety_params.yaml
β”‚   β””β”€β”€ sensor_params.yaml
β”β”€β”€ scripts/
β”‚   β”β”€β”€ robot_connection_node.py
β”‚   β””β”€β”€ remote_control_node.py
β”β”€β”€ srv/
β”‚   β”β”€β”€ SetSafetyParams.srv
β”‚   β””β”€β”€ GetRobotStatus.srv
β””β”€β”€ msg/
    β”β”€β”€ SafetyStatus.msg
    β””β”€β”€ RobotStatus.msg
```

## β™οΈ μ„¤μ •

### λ΅λ΄‡ μ—°κ²° μ„¤μ •

`config/robot_params.yaml`μ—μ„ λ΅λ΄‡ μ—°κ²° μ •λ³΄λ¥Ό μ„¤μ •ν•  μ μμµλ‹λ‹¤:

```yaml
robot:
  ip: "169.254.128.2"  # TR200 λ΅λ΄‡ IP
  port: 5480           # TR200 λ΅λ΄‡ ν¬νΈ
  identity: "tr200_ros_controller"
```

### μ›κ²© μ μ–΄ μ„¤μ •

λ°μΉ νμΌμ—μ„ μ›κ²© μ μ–΄ νλΌλ―Έν„°λ¥Ό μ΅°μ •ν•  μ μμµλ‹λ‹¤:

```bash
roslaunch tr200_ros_control tr200_remote_control.launch \
  linear_speed:=0.3 \
  angular_speed:=0.3 \
  command_timeout:=3.0
```

## π”§ κ°λ°

### μƒλ΅μ΄ λ…Έλ“ μ¶”κ°€

1. `scripts/` λ””λ ‰ν† λ¦¬μ— μƒ λ…Έλ“ νμΌ μƒμ„±
2. `CMakeLists.txt`μ— μ¤ν¬λ¦½νΈ μ„¤μΉ μ¶”κ°€
3. ν•„μ”μ‹ λ°μΉ νμΌμ— λ…Έλ“ μ¶”κ°€

### λ©”μ‹μ§€/μ„λΉ„μ¤ μ¶”κ°€

1. `msg/` λλ” `srv/` λ””λ ‰ν† λ¦¬μ— μƒ νμΌ μƒμ„±
2. `CMakeLists.txt`μ— λ©”μ‹μ§€/μ„λΉ„μ¤ μ¶”κ°€
3. `package.xml`μ— μμ΅΄μ„± μ¶”κ°€
4. `catkin_make` μ‹¤ν–‰

## π¨ μ•μ „ μ£Όμμ‚¬ν•­

- λ΅λ΄‡ μ£Όλ³€μ— μ‚¬λμ΄ μ—†λ”μ§€ ν™•μΈν•μ„Έμ”
- λΉ„μƒμ •μ§€ λ²„νΌμ΄ μ‘λ™ν•λ”μ§€ ν™•μΈν•μ„Έμ”
- μ²« μ‹¤ν–‰ μ‹ λ‚®μ€ μ†λ„λ΅ ν…μ¤νΈν•μ„Έμ”
- μ„Όμ„ λ°μ΄ν„°κ°€ μ •μƒμ μΌλ΅ μμ‹ λλ”μ§€ ν™•μΈν•μ„Έμ”

## π“ λ¨λ‹ν„°λ§

### ν† ν”½ λ¨λ‹ν„°λ§

```bash
# μ—°κ²° μƒνƒ ν™•μΈ
rostopic echo /connection_status

# μ›κ²© μ μ–΄ λ…λ Ή ν™•μΈ
rostopic echo /remote_cmd_vel

# λ΅λ΄‡ μƒνƒ ν™•μΈ
rostopic echo /robot_status
```

### λ…Έλ“ μƒνƒ ν™•μΈ

```bash
# μ‹¤ν–‰ μ¤‘μΈ λ…Έλ“ ν™•μΈ
rosnode list

# λ…Έλ“ μ •λ³΄ ν™•μΈ
rosnode info /robot_connection_node
rosnode info /remote_control_node
```

## π› νΈλ¬λΈ”μν…

### λ΅λ΄‡ μ—°κ²° μ‹¤ν¨

1. λ΅λ΄‡ IP μ£Όμ† ν™•μΈ
2. λ„¤νΈμ›ν¬ μ—°κ²° μƒνƒ ν™•μΈ
3. λ΅λ΄‡ μ „μ› μƒνƒ ν™•μΈ
4. λ°©ν™”λ²½ μ„¤μ • ν™•μΈ

### ν‚¤λ³΄λ“ μ…λ ¥μ΄ μ‘λ™ν•μ§€ μ•μ

1. ν„°λ―Έλ„μ„ ν΄λ¦­ν•μ—¬ ν¬μ»¤μ¤ ν™•μΈ
2. ν‚¤λ³΄λ“ κ¶ν• ν™•μΈ
3. λ…Έλ“ μ‹¤ν–‰ μƒνƒ ν™•μΈ

### μ„Όμ„ λ°μ΄ν„° μμ‹  μ•λ¨

1. λ΅λ΄‡ μ—°κ²° μƒνƒ ν™•μΈ
2. μ„Όμ„ ν•λ“μ›¨μ–΄ μƒνƒ ν™•μΈ
3. ν† ν”½ κµ¬λ… μƒνƒ ν™•μΈ

## π“ μ§€μ›

λ¬Έμ κ°€ λ°μƒν•λ©΄ λ‹¤μμ„ ν™•μΈν•μ„Έμ”:

1. λ΅κ·Έ λ©”μ‹μ§€ ν™•μΈ
2. ROS ν† ν”½ μƒνƒ ν™•μΈ
3. λ…Έλ“ μ‹¤ν–‰ μƒνƒ ν™•μΈ
4. λ„¤νΈμ›ν¬ μ—°κ²° μƒνƒ ν™•μΈ

## π“„ λΌμ΄μ„ μ¤

MIT License

## π‘¥ κΈ°μ—¬μ

- User (KATECH μ—°κµ¬μ›) - ν”„λ΅μ νΈ μ„¤κ³„ λ° κµ¬ν„

---

**λ²„μ „**: 1.0.0  
**μµμΆ… μ—…λ°μ΄νΈ**: 2024λ…„ 12μ›” 19μΌ
